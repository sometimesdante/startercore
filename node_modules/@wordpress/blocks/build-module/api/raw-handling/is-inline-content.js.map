{"version":3,"sources":["@wordpress/blocks/src/api/raw-handling/is-inline-content.js"],"names":["isTextContent","isInline","node","contextTag","tag","nodeName","toLowerCase","inlineAllowedTagGroups","some","tagGroup","filter","t","includes","length","deepCheck","nodes","every","Array","from","children","isDoubleBR","previousSibling","isInlineContent","HTML","doc","document","implementation","createHTMLDocument","body","innerHTML"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,aAAT,QAA8B,gBAA9B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,QAAT,CAAmBC,IAAnB,EAAyBC,UAAzB,EAAsC;AACrC,MAAKH,aAAa,CAAEE,IAAF,CAAlB,EAA6B;AAC5B,WAAO,IAAP;AACA;;AAED,MAAK,CAAEC,UAAP,EAAoB;AACnB,WAAO,KAAP;AACA;;AAED,QAAMC,GAAG,GAAGF,IAAI,CAACG,QAAL,CAAcC,WAAd,EAAZ;AACA,QAAMC,sBAAsB,GAAG,CAC9B,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,CAD8B,EAE9B,CAAE,IAAF,EAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,IAAhC,CAF8B,CAA/B;AAKA,SAAOA,sBAAsB,CAACC,IAAvB,CACJC,QAAF,IACC,CAAEL,GAAF,EAAOD,UAAP,EAAoBO,MAApB,CAA8BC,CAAF,IAAS,CAAEF,QAAQ,CAACG,QAAT,CAAmBD,CAAnB,CAAvC,EACEE,MADF,KACa,CAHR,CAAP;AAKA;;AAED,SAASC,SAAT,CAAoBC,KAApB,EAA2BZ,UAA3B,EAAwC;AACvC,SAAOY,KAAK,CAACC,KAAN,CACJd,IAAF,IACCD,QAAQ,CAAEC,IAAF,EAAQC,UAAR,CAAR,IACAW,SAAS,CAAEG,KAAK,CAACC,IAAN,CAAYhB,IAAI,CAACiB,QAAjB,CAAF,EAA+BhB,UAA/B,CAHJ,CAAP;AAKA;;AAED,SAASiB,UAAT,CAAqBlB,IAArB,EAA4B;AAC3B,SACCA,IAAI,CAACG,QAAL,KAAkB,IAAlB,IACAH,IAAI,CAACmB,eADL,IAEAnB,IAAI,CAACmB,eAAL,CAAqBhB,QAArB,KAAkC,IAHnC;AAKA;;AAED,eAAe,SAASiB,eAAT,CAA0BC,IAA1B,EAAgCpB,UAAhC,EAA6C;AAC3D,QAAMqB,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwBC,kBAAxB,CAA4C,EAA5C,CAAZ;AAEAH,EAAAA,GAAG,CAACI,IAAJ,CAASC,SAAT,GAAqBN,IAArB;AAEA,QAAMR,KAAK,GAAGE,KAAK,CAACC,IAAN,CAAYM,GAAG,CAACI,IAAJ,CAAST,QAArB,CAAd;AAEA,SAAO,CAAEJ,KAAK,CAACP,IAAN,CAAYY,UAAZ,CAAF,IAA8BN,SAAS,CAAEC,KAAF,EAASZ,UAAT,CAA9C;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { isTextContent } from '@wordpress/dom';\n\n/**\n * Checks if the given node should be considered inline content, optionally\n * depending on a context tag.\n *\n * @param {Node}   node       Node name.\n * @param {string} contextTag Tag name.\n *\n * @return {boolean} True if the node is inline content, false if nohe.\n */\nfunction isInline( node, contextTag ) {\n\tif ( isTextContent( node ) ) {\n\t\treturn true;\n\t}\n\n\tif ( ! contextTag ) {\n\t\treturn false;\n\t}\n\n\tconst tag = node.nodeName.toLowerCase();\n\tconst inlineAllowedTagGroups = [\n\t\t[ 'ul', 'li', 'ol' ],\n\t\t[ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ],\n\t];\n\n\treturn inlineAllowedTagGroups.some(\n\t\t( tagGroup ) =>\n\t\t\t[ tag, contextTag ].filter( ( t ) => ! tagGroup.includes( t ) )\n\t\t\t\t.length === 0\n\t);\n}\n\nfunction deepCheck( nodes, contextTag ) {\n\treturn nodes.every(\n\t\t( node ) =>\n\t\t\tisInline( node, contextTag ) &&\n\t\t\tdeepCheck( Array.from( node.children ), contextTag )\n\t);\n}\n\nfunction isDoubleBR( node ) {\n\treturn (\n\t\tnode.nodeName === 'BR' &&\n\t\tnode.previousSibling &&\n\t\tnode.previousSibling.nodeName === 'BR'\n\t);\n}\n\nexport default function isInlineContent( HTML, contextTag ) {\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\n\tdoc.body.innerHTML = HTML;\n\n\tconst nodes = Array.from( doc.body.children );\n\n\treturn ! nodes.some( isDoubleBR ) && deepCheck( nodes, contextTag );\n}\n"]}